## 实验要求

> 设计并实现一个精简型单用户 SQL 引擎(DBMS) MiniSQL，允许用户通过字符界面输入输入 SQL 语句实现表的建立/删除；索引的建立/删除以及表记录的插入/删除/查找。
>
> 通过对 MiniSQL 的设计与实现，提高学生的系统编程能力，加深对数据库系统原理的理解。

### 需求概述

> * 数据类型
>
>   只要求支持三种基本数据类型：int，char(n)，float，其中 char(n) 满足： 1 <= n <= 255。
>
> * 表定义
>
>   一个表最多可以定义32个属性，各属性可以指定是否为 unique；支持单属性的主键定义。
>
> * 索引的建立和删除
>
>   对于表的主属性自动建立 B+ 树索引，对于声明为 unique 的属性可以通过 SQL 语句由用户指定建立/删除 B+ 树索引（因此，所有的 B+ 树索引都是单属性单值的）。
>
> * 查找记录
>
>   可以通过指定用 and 连接的多个条件进行查询，支持等值查询和区间查询。
>
> * 插入和删除记录
>
>   支持每次一条记录的插入操作；支持每次一条或多条记录的删除操作。

## 总体设计

### 组员分工

<!-- Git 版本隐去此信息，自己看 git log 去（逃 -->

### 模块设计与简要概述

![](./img/overall.png)

*与实验指导书的设计略有不同，我们的模块设计中 Catalog Manager 不直接与 Interpreter 交互，而是通过 API 层进行中转。*

#### Interpreter

直接与用户进行交互，接收并结构化用户输入的命令，检测语法正确性后调用 API 层函数执行命令。

#### API

提供各个 SQL 语句的执行接口，供 Interpreter 层调用。在检验语义正确性后通过调用各个模块的接口执行命令。

#### Catalog Manager

负责管理数据库的所有模式信息，包括表的名称、字段、主键、索引等。

#### Record Manager

管理和记录表中数据，提供记录的插入、删除和查找等操作接口。保证 unique 等语义正确性。

#### Index Manager

由 B+ 树实现索引，提高命令运行速度。

#### Buffer Manager

负责缓冲区的管理。
1. 根据需要，读取指定的数据到系统缓冲区或将缓冲区中的数据写出到文件
2. 实现缓冲区的替换算法，当缓冲区满时根据 LRU 模式进行替换
3. 记录缓冲区中各页的状态
4. 提供缓冲区页的 pin 功能，防止正在被操作的页被换出

#### DB Files

指构成数据库的所有数据文件，包括记录数据、索引数据及 Catalog 数据等。

### 基本流程

<!-- TODO -->

## 详细设计

### API 模块

### Buffer Manager 模块

### Catalog Manager 模块

### Index Manager 模块

### Interpreter 模块

### Record Manager 模块

## 程序展示

## 总结
